(()=>{"use strict";var e,t={9104:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(3645),o=n.n(i)()((function(e){return e[1]}));o.push([e.id,".cookies-widget {\n  display: flex;\n  flex-wrap: wrap;\n  flex: 1;\n  width: 100%;\n}\n.cookies-widget .get-cookies-btn {\n  margin-top: auto;\n  margin-left: auto;\n}\n.cookies-widget .cookie-row {\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n}\n.cookies-widget .cookie-row .cookie-row-inner {\n  display: flex;\n  justify-content: space-between;\n  padding: 4px 6px;\n  width: 100%;\n}\n.cookies-widget .cookie-row .cookie-name {\n  margin-right: auto;\n  min-width: 60px;\n}\n.cookies-widget .cookie-row .cookie-textarea {\n  width: 400px;\n}\n.cookies-widget .cookie-row .parse-btn {\n  padding: 0 6px;\n}\n.cookies-widget .cookie-row .parse-btn .parse-btn-icon {\n  font-size: medium;\n}\n.cookies-widget .cookie-row .parse-btn-placeholder {\n  width: 28px;\n}\n.cookies-widget .cookie-row .cookie-textarea {\n  resize: vertical;\n}\n",""]);const a=o},4012:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(3645),o=n.n(i)()((function(e){return e[1]}));o.push([e.id,".dashboard-root {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  min-width: 600px;\n  min-height: 400px;\n}\n.dashboard-root .dashboard-footer {\n  margin-top: auto;\n}\n",""]);const a=o},2739:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(3645),o=n.n(i)()((function(e){return e[1]}));o.push([e.id,".header-widget {\n  display: flex;\n  width: 100%;\n  justify-content: space-between;\n  border-bottom: 1px solid #3a3838;\n  margin-bottom: 4px;\n}\n.header-widget .header-btn {\n  text-transform: capitalize;\n  font-weight: bolder;\n}\n.header-widget .import-input {\n  visibility: hidden;\n  height: 0;\n  width: 0;\n}\n",""]);const a=o},335:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(3645),o=n.n(i)()((function(e){return e[1]}));o.push([e.id,".object-viewer {\n  padding: 4px;\n  margin-bottom: 10px;\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n  width: 100%;\n}\n.object-viewer .return-button {\n  padding: 6px;\n}\n.object-viewer .return-button-icon {\n  font-size: medium;\n}\n.object-viewer .object-viewer-header {\n  font-size: medium;\n}\n.object-viewer .object-viewer-body {\n  padding: 6px;\n}\n",""]);const a=o},5474:(e,t,n)=>{var i=n(7294),o=n(3935),a=n(9226),r=n(9416);const s=r.browser.extension.getBackgroundPage().console,c=()=>(0,a.I0)(),l=a.v9;var d,u=n(4296);!function(e){e[e.COOKIE=0]="COOKIE",e[e.OBJECT_VIEWER=1]="OBJECT_VIEWER",e[e.JWT=2]="JWT",e[e.SESSION=3]="SESSION",e[e.SETTING=4]="SETTING"}(d||(d={}));const m={viewType:d.COOKIE},p=(0,u.oM)({name:"view",initialState:m,reducers:{setViewType:(e,t)=>{e.viewType=t.payload}}}),{setViewType:g}=p.actions,h=p.reducer;var w=n(3379),f=n.n(w),S=n(4012);f()(S.Z,{insert:"head",singleton:!1}),S.Z.locals;var v=n(67),y=n(7812),b=n(7343),E=n(3279),k=n.n(E);const O=async()=>(await r.browser.tabs.query({active:!0,currentWindow:!0}))[0].url,I={domain:"",name:"",storeId:"",value:"",session:!1,hostOnly:!1,path:"",httpOnly:!1,secure:!1,sameSite:"lax"},T=(0,u.hg)("cookies/loadCookies",(async(e,t)=>{const{setting:{cookieSetting:n}}=t.getState();return n.map((e=>({...I,...e})))})),N=(0,u.hg)("cookies/getCookies",(async(e,t)=>{const{cookies:{ids:n,entities:i}}=t.getState(),o=await O(),a=n.reduce(((e,t)=>{const n=i[t];if(n){const{name:t,url:i}=n;e.push(r.browser.cookies.get({name:t,url:i||o||""}))}return e}),[]),s=await j(a);return C(s)})),x=(0,u.hg)("cookies/setCookieValue",(async(e,t)=>{const{name:n,value:i}=e,{cookies:{entities:o}}=t.getState(),a={...o[n],value:i},s=await O();return await r.browser.cookies.remove({url:a.url||s||"",name:a.name}),await r.browser.cookies.set({url:a.url||s||"",name:a.name,value:a.value,domain:a.domain||void 0,expirationDate:a.expirationDate||void 0,httpOnly:a.httpOnly||void 0,path:a.path||void 0,sameSite:"unspecified"===a.sameSite?void 0:a.sameSite,secure:a.secure||void 0,storeId:a.storeId||void 0}),a})),C=e=>e.map((e=>({...e,appId:e.name}))),j=async e=>Promise.allSettled(e).then((e=>e.filter((e=>"fulfilled"===e.status&&Boolean(e.value))).map((e=>e.value)))),Z=(0,u.HF)({selectId:e=>e.appId}),A=(0,u.oM)({name:"cookies",initialState:Z.getInitialState(),reducers:{},extraReducers:e=>{e.addCase(T.fulfilled,Z.upsertMany),e.addCase(N.fulfilled,Z.upsertMany),e.addCase(x.fulfilled,Z.upsertOne)}}),{}=A.actions,J=A.reducer;var R=n(9104);f()(R.Z,{insert:"head",singleton:!1}),R.Z.locals;var W=n(6245),U=n(7361),z=n.n(U);const M=e=>{if(!e.options?.children?.length||e.options?.children?.length<=0)return{name:e.name||"",children:[]};const{children:t,specialInstruction:n}=e.options;let i;if("JWT"===n&&(i=(0,W.Z)(e.value)),!i)return{name:e.name,children:[]};const o=t.reduce(((e,t)=>{const n=z()(i,t.path);if(!n)return e;const o=t.name||t.path.toString();return e.push({value:n,name:o}),e}),[]);return{name:e.name,children:o}},B=(0,u.HF)({selectId:e=>e.name}),V=(0,u.oM)({name:"view",initialState:B.getInitialState(),reducers:{setCookieChildren:(e,t)=>{B.upsertMany(e,t.payload)}}}),{setCookieChildren:P}=V.actions,_=V.reducer;var D;!function(e){e.INTEGRATION="INTEGRATION",e.TEST="TEST"}(D||(D={}));const K={cookieSetting:[{name:"OTSESSIONAABQRN",appId:"OTSESSIONAABQRN",url:""},{name:"OTSESSIONAABQRD",appId:"OTSESSIONAABQRD",url:""},{name:"JWT",appId:"JWT",url:"",options:{specialInstruction:"JWT",children:[{path:["sub"],name:"UserUUID"},{path:["company"],name:"CompanyUUID"},{path:["act","context"],name:"ActingAsType"},{path:["act","sub"],name:"ProxiedUserUUID"},{path:["act","company"],name:"ProxiedCompanyUUID"}]}},{name:"route",appId:"route",url:"",options:{editable:!0}}],sessionSetting:{[D.INTEGRATION]:"https://integration.com",[D.TEST]:"https://test.com",currentEnvironment:D.INTEGRATION,attributes:[{name:"UIPermissions",type:"JSON",pinned:!0},{name:"UserPermissions",type:"string",separator:","},{name:"RoleList",type:"string",separator:","},{name:"EntitySettings",type:"string",separator:"|"}]}},G=(0,u.hg)("setting/loadSetting",(async(e,t)=>{const{setting:{cookieSetting:n,sessionSetting:i}}=t.getState();let o=!1,a=(await r.browser.storage.sync.get("setting")).setting;var s;return a&&(s=a)&&s.cookieSetting&&Array.isArray(s.cookieSetting)||(o=!0),o&&(0===n.length&&(a.cookieSetting=K.cookieSetting),i||(a.sessionSetting=K.sessionSetting)),a})),F=(0,u.hg)("setting/storeSetting",(async(e,t)=>{const{getState:n,dispatch:i}=t,{setting:o}=n();await r.browser.storage.sync.set({setting:o}),i(T())})),L=(0,u.oM)({name:"setting",initialState:{cookieSetting:[]},reducers:{setSetting:(e,t)=>t.payload,setCookieSetting:(e,t)=>{e.cookieSetting=t.payload},useDefaultSetting:()=>K},extraReducers:e=>{e.addCase(G.fulfilled,((e,t)=>t.payload)),e.addCase(F.fulfilled,(()=>{}))}}),{setSetting:Q,setCookieSetting:$,useDefaultSetting:H}=L.actions,q=L.reducer,X=(0,u.hg)("session/fetchSession",(async(e,t)=>{const{cookies:{entities:n},setting:{sessionSetting:i},session:{sessionId:o,session:a}}=t.getState(),r=n.JWT,s=n.OTSESSIONAABQRN;if(!r||!s||!i)return{oldSessionId:o};const c=r.value,l=s.value;if(0===c.length||0===l.length||l===o)return{sessionId:o,session:a};const d=i[i.currentEnvironment]+l,u=await fetch(d,{headers:{Authorization:`Bearer ${c}`}});return{session:await u.json(),sessionId:l}})),Y=(0,u.oM)({name:"session",initialState:{},reducers:{setSession:(e,t)=>t.payload},extraReducers:e=>{e.addCase(X.fulfilled,((e,t)=>t.payload))}}),{setSession:ee}=Y.actions,te=Y.reducer,ne=e=>{const{cookiesState:{ids:t,entities:n},cookiesChildren:{entities:o}}=e,a=c(),r=()=>{a(g(d.JWT))},s=k()(((e,t)=>{a(x({name:e,value:t}))}),300),l=e=>t=>{const{name:n=""}=e;s(n,t.target.value)};return i.createElement("div",{className:"cookie-row"},t.map(((e,t)=>{const a=n[e],{name:s,value:c="",options:{specialInstruction:d="",editable:u=!1}={}}=a;return i.createElement(ie,{name:s,value:c,readonly:!u,textareaOnChange:l(a),key:`${e}_${t}`,endAdornment:"JWT"===d?i.createElement(y.Z,{onClick:r,className:"parse-btn"},i.createElement(v.Z,{className:"parse-btn-icon"})):null},(e=>{const t=o[e];if(!t)return;const{children:n}=t;return n.map(((e,t)=>{const{name:n,value:o}=e;return i.createElement(ie,{name:n,value:o,key:n+" "+t,indent:20},i.createElement("div",{className:"parse-btn-placeholder"}))}))})(s))})))},ie=e=>{const{name:t,value:n,readonly:o=!0,indent:a=0,endAdornment:r=null,textareaOnChange:s}=e;return i.createElement(i.Fragment,null,i.createElement("div",{className:"cookie-row-inner"},i.createElement("div",{className:"cookie-name",style:{paddingLeft:a}},t),i.createElement(b.Z,{defaultValue:n,rowsMax:2,className:"cookie-textarea",onChange:s,readOnly:o}),r||i.createElement("div",{className:"parse-btn-placeholder"})),e.children)},oe=e=>{const t=c(),n=l((e=>e.cookies)),o=l((e=>e.cookiesChildren));return l((e=>e.setting)),(0,i.useEffect)((()=>{t(G()).then((()=>t(T()))).then((()=>t(N()))).then((()=>t(((e,t)=>{const{cookies:{ids:n,entities:i}}=t(),o=n.reduce(((e,t)=>{const n=i[t];return e.push(M(n)),e}),[]);e(P(o))})))).then((()=>t(X()))).catch((e=>s.log(e)))}),[]),i.createElement("div",{className:"cookies-widget"},i.createElement(ne,{cookiesState:n,cookiesChildren:o}))};var ae=n(282),re=n(9969),se=n(2739);f()(se.Z,{insert:"head",singleton:!1}),se.Z.locals;const ce=()=>{const e=l((e=>e.setting)),t=(0,a.I0)(),[n,o]=(0,i.useState)(!1),r=(0,i.useRef)(null);return i.createElement("div",{className:"header-widget"},n?i.createElement(i.Fragment,null,i.createElement(ae.Z,{onClick:()=>{t(g(d.SETTING))},size:"small",className:"header-btn"},"View settings")," ",i.createElement(ae.Z,{onClick:()=>{const t="setting.json",n=new File([JSON.stringify(e)],t,{type:"application/json"}),i=URL.createObjectURL(n),o=document.createElement("a");o.setAttribute("href",i),o.setAttribute("download",t),o.style.visibility="hidden",document.body.appendChild(o),o.click(),document.body.removeChild(o)},size:"small",className:"header-btn"},"Export settings")," ",i.createElement(ae.Z,{onClick:()=>{r&&r.current&&r.current.click()},size:"small",className:"header-btn"},"Import settings",i.createElement("input",{ref:r,accept:"application/json",type:"file",className:"import-input",onChange:e=>{const n=e.target.files;n&&0!==n.length&&n[0].text().then((e=>{const n=JSON.parse(e);t(Q(n))}))}}))," ",i.createElement(ae.Z,{onClick:()=>{t(H()),t(F())},size:"small",className:"header-btn"},"Use default settings")):i.createElement(i.Fragment,null,i.createElement(ae.Z,{onClick:()=>{t(g(d.SESSION))},size:"small",className:"header-btn"},"View session")," "),i.createElement(y.Z,{onClick:()=>{o((e=>!e))},size:"small"},i.createElement(re.Z,null)))};var le=n(9826),de=n(5171),ue=n.n(de),me=n(335);f()(me.Z,{insert:"head",singleton:!1}),me.Z.locals;const pe=e=>{const{name:t,object:n={},collapsed:o=!1,returnViewType:a,sorted:r=!1,handleOnAdd:s,handleOnEdit:l}=e,d=c();return i.createElement("div",{className:"object-viewer"},i.createElement("div",{className:"object-viewer-header"},i.createElement(y.Z,{className:"return-button",onClick:()=>{d(g(a))}},i.createElement(le.Z,{className:"return-button-icon"})),i.createElement("span",null,t)),i.createElement("div",{className:"object-viewer-body"},i.createElement(ue(),{src:n,onEdit:l,onAdd:s,collapsed:o,sortKeys:r})))},ge=()=>{const e=l((e=>e.cookies.entities)),t=(0,a.I0)(),n=e.JWT?.value;if(!n||0===n.length)return t(g(d.COOKIE)),null;const o=(0,W.Z)(n);return i.createElement(pe,{name:"JWT",object:o,returnViewType:d.COOKIE})};var he=n(7005),we=n.n(he);const fe=(e,t)=>{if(!e)return{};let n={...e};return t?.attributes?.every((t=>{if(we()(e[t.name])||("JSON"===t.type?n[t.name]={...JSON.parse(e[t.name])}:"string"===t.type&&(n[t.name]=e[t.name].split(t.separator||","))),t.pinned)return n=n[t.name],!1})),n},Se=()=>{const e=l((e=>e.session.session)),t=l((e=>e.setting.sessionSetting));return i.createElement(pe,{name:"Session",object:fe(e,t),returnViewType:d.COOKIE,sorted:!0})},ve=()=>{const e=l((e=>e.setting)),t=c();return i.createElement(pe,{name:"Setting",object:e,returnViewType:d.COOKIE,handleOnAdd:e=>{t(Q(e.updated_src)),t(F())},handleOnEdit:e=>{t(Q(e.updated_src)),t(F())}})},ye=()=>{const e=l((e=>e.view));return i.createElement("div",{className:"dashboard-root"},i.createElement(ce,null),(()=>{switch(e.viewType){case d.COOKIE:return i.createElement(oe,null);case d.JWT:return i.createElement(ge,null);case d.SESSION:return i.createElement(Se,null);case d.SETTING:return i.createElement(ve,null);default:return s.log("Not implemented"),null}})(),i.createElement("div",{className:"dashboard-footer"},"Browser Observer is a development tool for easy viewing/editing of cookies and has tools for decoding common tokens like JWTs."))};var be=n(3894);const Ee=(0,n(4500).createLogger)({logger:s}),ke=(0,u.xC)({reducer:{view:h,cookies:J,cookiesChildren:_,setting:q,session:te},middleware:e=>e().concat([be.Z,Ee])});(window.screenLeft<0||window.screenTop<0||window.screenLeft>window.screen.width||window.screenTop>window.screen.height)&&chrome.runtime.getPlatformInfo((function(e){if("mac"===e.os){const e=new CSSStyleSheet;e.insertRule("\n          @keyframes redraw {\n            0% {\n              opacity: 1;\n            }\n            100% {\n              opacity: .99;\n            }\n          }\n        "),e.insertRule("\n          html {\n            animation: redraw 1s linear infinite;\n          }\n        "),document.adoptedStyleSheets=[...document.adoptedStyleSheets,e]}})),o.render(i.createElement(i.StrictMode,null,i.createElement((()=>i.createElement(a.zt,{store:ke},i.createElement(ye,null))),null)),document.getElementById("root"))}},n={};function i(e){var o=n[e];if(void 0!==o)return o.exports;var a=n[e]={id:e,exports:{}};return t[e].call(a.exports,a,a.exports,i),a.exports}i.m=t,e=[],i.O=(t,n,o,a)=>{if(!n){var r=1/0;for(l=0;l<e.length;l++){for(var[n,o,a]=e[l],s=!0,c=0;c<n.length;c++)(!1&a||r>=a)&&Object.keys(i.O).every((e=>i.O[e](n[c])))?n.splice(c--,1):(s=!1,a<r&&(r=a));s&&(e.splice(l--,1),t=o())}return t}a=a||0;for(var l=e.length;l>0&&e[l-1][2]>a;l--)e[l]=e[l-1];e[l]=[n,o,a]},i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={42:0};i.O.j=t=>0===e[t];var t=(t,n)=>{var o,a,[r,s,c]=n,l=0;for(o in s)i.o(s,o)&&(i.m[o]=s[o]);for(c&&c(i),t&&t(n);l<r.length;l++)a=r[l],i.o(e,a)&&e[a]&&e[a][0](),e[r[l]]=0;i.O()},n=self.webpackChunkbrowser_observer=self.webpackChunkbrowser_observer||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var o=i.O(void 0,[736],(()=>i(5474)));o=i.O(o)})();